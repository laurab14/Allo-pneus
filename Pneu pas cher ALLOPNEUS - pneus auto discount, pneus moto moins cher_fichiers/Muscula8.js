!function(){var e={};e.corsPost=function(e,t){try{var n=window.XMLHttpRequest?new window.XMLHttpRequest:{};if("withCredentials"in n)return n.open("POST",e+"json"),n.send(t);if(window.XDomainRequest){var r=new window.XDomainRequest;return r.open("POST",e+"json"),r.send(t)}var o=document.createElement("iframe"),a="UNIQUE_"+(new Date).getTime()+Math.random();document.body.appendChild(o),o.style.display="none",o.contentWindow.name=a;var i=document.createElement("form");i.target=a,i.action=window.Muscula.settings.localhost===!0?"http://localhost:8081/log":"https://muscula.herokuapp.com/log",i.method="POST";var c=document.createElement("input");c.type="hidden",c.name="message",c.value=t,i.appendChild(c),document.body.appendChild(i),i.submit()}catch(s){}},function(){function t(e){return 10>e?"0"+e:e}function n(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function r(e,t){var c,s,u,l,d,g=o,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(t,e,p)),typeof p){case"string":return n(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(o+=a,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,c=0;l>c;c+=1)d[c]=r(c,p)||"null";return u=0===d.length?"[]":o?"[\n"+o+d.join(",\n"+o)+"\n"+g+"]":"["+d.join(",")+"]",o=g,u}if(i&&"object"==typeof i)for(l=i.length,c=0;l>c;c+=1)"string"==typeof i[c]&&(s=i[c],u=r(s,p),u&&d.push(n(s)+(o?": ":":")+u));else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(u=r(s,p),u&&d.push(n(s)+(o?": ":":")+u));return u=0===d.length?"{}":o?"{\n"+o+d.join(",\n"+o)+"\n"+g+"}":"{"+d.join(",")+"}",o=g,u}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var o,a,i,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.stringify="function"!=typeof(window.JSON&&window.JSON.stringify)?function(e,t,n){var c;if(o="",a="","number"==typeof n)for(c=0;n>c;c+=1)a+=" ";else"string"==typeof n&&(a=n);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return r("",{"":e})}:JSON.stringify}(),function(t){e.printStackTrace=t()}(function(){function e(t){t=t||{guess:!0};var n=t.e||null,r=!!t.guess,o=new e.implementation,a=o.run(n);return r?o.guessAnonymousFunctions(a):a}return e.implementation=function(){},e.implementation.prototype={run:function(e,t){if(e=e||this.createException(),t=t||this.mode(e),"other"===t)return this.other(arguments.callee);switch(t){case"chrome":return this.chrome(e);case"safari":return this.safari(e);case"ie":return this.ie(e);case"firefox":return this.firefox(e);case"opera11":return this.opera11(e);case"opera10b":return this.opera10b(e);case"opera10a":return this.opera10a(e);case"opera9":return this.opera9(e)}},createException:function(){try{this.undef()}catch(e){return e}},mode:function(e){return e.arguments&&e.stack?"chrome":e.stack&&e.sourceURL?"safari":e.stack&&e.number?"ie":e.stack&&e.fileName?"firefox":e.message&&e["opera#sourceloc"]?e.stacktrace?e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":e.message&&e.stack&&e.stacktrace?e.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":e.stack&&!e.fileName?"chrome":"other"},chrome:function(e){return(e.stack+"\n").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(1,-1)},safari:function(e){return e.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(e){return e.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(e){return e.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(e){for(var t="{anonymous}",n=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,r=e.stacktrace.split("\n"),o=[],a=0,i=r.length;i>a;a+=2){var c=n.exec(r[a]);if(c){var s=c[4]+":"+c[1]+":"+c[2],u=c[3]||"global code";u=u.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,t),o.push(u+"@"+s+" -- "+r[a+1].replace(/^\s+/,""))}}return o},opera10b:function(e){for(var t=/^(.*)@(.+):(\d+)$/,n=e.stacktrace.split("\n"),r=[],o=0,a=n.length;a>o;o++){var i=t.exec(n[o]);if(i){var c=i[1]?i[1]+"()":"global code";r.push(c+"@"+i[2]+":"+i[3])}}return r},opera10a:function(e){for(var t="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),o=[],a=0,i=r.length;i>a;a+=2){var c=n.exec(r[a]);if(c){var s=c[3]||t;o.push(s+"()@"+c[2]+":"+c[1]+" -- "+r[a+1].replace(/^\s+/,""))}}return o},opera9:function(e){for(var t="{anonymous}",n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),o=[],a=2,i=r.length;i>a;a+=2){var c=n.exec(r[a]);c&&o.push(t+"()@"+c[2]+":"+c[1]+" -- "+r[a+1].replace(/^\s+/,""))}return o},other:function(e){for(var t,n,r="{anonymous}",o=/function\s*([\w\-$]+)?\s*\(/i,a=[],i=10;e&&e.arguments&&a.length<i;)t=o.test(e.toString())?RegExp.$1||r:r,n=Array.prototype.slice.call(e.arguments||[]),a[a.length]=t+"("+this.stringifyArguments(n)+")",e=e.caller;return a},stringifyArguments:function(e){for(var t=[],n=Array.prototype.slice,r=0;r<e.length;++r){var o=e[r];void 0===o?t[r]="undefined":null===o?t[r]="null":o.constructor&&(o.constructor===Array?t[r]=o.length<3?"["+this.stringifyArguments(o)+"]":"["+this.stringifyArguments(n.call(o,0,1))+"..."+this.stringifyArguments(n.call(o,-1))+"]":o.constructor===Object?t[r]="#object":o.constructor===Function?t[r]="#function":o.constructor===String?t[r]='"'+o+'"':o.constructor===Number&&(t[r]=o))}return t.join(",")},sourceCache:{},ajax:function(e){var t=this.createXMLHTTPObject();if(t)try{return t.open("GET",e,!1),t.send(null),t.responseText}catch(n){}return""},createXMLHTTPObject:function(){for(var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;n++)try{return e=t[n](),this.createXMLHTTPObject=t[n],e}catch(r){}},isSameDomain:function(e){return"undefined"!=typeof location&&-1!==e.indexOf(location.hostname)},getSource:function(e){return e in this.sourceCache||(this.sourceCache[e]=this.ajax(e).split("\n")),this.sourceCache[e]},guessAnonymousFunctions:function(e){for(var t=0;t<e.length;++t){var n=/\{anonymous\}\(.*\)@(.*)/,r=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,o=e[t],a=n.exec(o);if(a){var i=r.exec(a[1]);if(i){var c=i[1],s=i[2],u=i[3]||0;if(c&&this.isSameDomain(c)&&s){var l=this.guessAnonymousFunction(c,s,u);e[t]=o.replace("{anonymous}",l)}}}}return e},guessAnonymousFunction:function(e,t){var n;try{n=this.findFunctionName(this.getSource(e),t)}catch(r){n="getSource failed with url: "+e+", exception: "+r.toString()}return n},findFunctionName:function(e,t){for(var n,r,o,a=/function\s+([^(]*?)\s*\(([^)]*)\)/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,c=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s="",u=Math.min(t,20),l=0;u>l;++l)if(n=e[t-l-1],o=n.indexOf("//"),o>=0&&(n=n.substr(0,o)),n){if(s=n+s,r=i.exec(s),r&&r[1])return r[1];if(r=a.exec(s),r&&r[1])return r[1];if(r=c.exec(s),r&&r[1])return r[1]}return"(?)"}},e}),function(){e.g_aLoggedEvents=[],e.g_aAnalyticsEvents=[],e.g_intLoggedEventCount=0,e.g_intLoggedInternalEventCount=0,e.argumentsToArray=function(e,t){var n=t||0;return Array.prototype.slice.apply(e,[n])},e.musculaPost=function(t){var n=window.Muscula.settings.localhost===!0?"http://localhost:8081/log":"https://muscula.herokuapp.com/log";e.corsPost(n,t)},e.startServerLogError=function(){try{if(!document.body)return void e.setTimeout(e.startServerLogError,200);for(;e.g_aLoggedEvents.length>0;){var t=e.g_aLoggedEvents.pop();t.logId=window.Muscula.settings.logId,t.userAgent=navigator.userAgent,t.pageUrl=document.location.href,t.internal||e.addSourceLines(t);var n;try{t.info=window.Muscula.info,n=e.stringify(t)}catch(r){e.musculaPost('{internal: true, logId:"'+window.Muscula.settings.logId+'", userAgent: "'+navigator.userAgent.replace('"','\\"')+'", pageUrl:"'+document.location.href.replace('"','\\"')+'", JSON_stringify_exception: "'+r.message.replace('"','\\"')+'"}');continue}e.musculaPost(n)}}catch(o){}},e.g_regExpIgnoreHtmlProperties=new RegExp("[A-Z\\_]{2,200}|layerX|returnValue|layerY|keyLocation|-(.*?)|webkit(.*?)"),e.exceptionToState=function(t){var n={};try{Object.getOwnPropertyNames&&Object.getOwnPropertyNames(t).forEach&&Object.getOwnPropertyNames(t).forEach(function(e){n[e]=t[e]});for(var r in t)n[r]=t[r];var o="";try{o=t.stack?e.printStackTrace({e:t}):e.printStackTrace()}catch(a){o="Error getting printstack: "+a}n.printStack=o}catch(i){}return n},e.eventToState=function(t){var n={};try{for(var r in t)e.g_regExpIgnoreHtmlProperties.test(r)||"string"!=typeof t[r]&&"number"!=typeof t[r]||(n[r]=t[r])}catch(o){}return n},e.logAnalyticsInterrupt=function(){if(!window._gaq||!window._gaq.push)return void setTimeout(e.logAnalyticsInterrupt,500);for(;e.g_aAnalyticsEvents.length>0;){var t=e.g_aAnalyticsEvents.pop();window._gaq.push(["_trackEvent","Muscula","JavaScript error logged",t.errorMessage])}e.g_blnAnalyticsInterruptRunning=!1},e.logAnalytics=function(){e.g_blnAnalyticsInterruptRunning||(e.g_blnAnalyticsInterruptRunning=!0,e.logAnalyticsInterrupt())},e.serverLogError=function(t){var n=t.internal;if(n&&e.g_intLoggedInternalEventCount||!n&&e.g_intLoggedEventCount<10){if(e.g_blnLoggingInternal=t.internal,e.g_aLoggedEvents.push(t),e.startServerLogError(),!e.g_blnLoggingInternal&&!window.Muscula.settings.googleAnalyticsEvents){var r={errorMessage:"No description for error, see muscula app"};t.message&&"undefined"!==t.message?r.errorMessage=t.message:t.exception&&t.exception.message&&"undefined"!==t.exception.message&&(r.errorMessage=t.exception.message),e.g_aAnalyticsEvents.push(r),e.logAnalytics()}e.g_blnLoggingInternal=!1,n?e.g_intLoggedInternalEventCount++:e.g_intLoggedEventCount++}},e.getSource=function(t){var n=e.createXMLHTTPObject();if(n)try{return n.open("GET",t,!1),n.send(null),n.responseText}catch(r){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"getSource",sourceUrl:t,exception:e.exceptionToState(r)})}return""},e.createXMLHTTPObject=function(){for(var t,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=0;r<n.length;r++)try{return t=n[r](),e.createXMLHTTPObject=n[r],t}catch(o){}},e.canGetSource=function(e){return-1===document.location.href.indexOf(e)&&-1!==window.location.protocol.indexOf("http")&&-1!==e.indexOf(location.hostname)&&(-1!==e.indexOf("localhost")||-1!==e.indexOf("127.0.0.1"))},e.addSourceLines=function(t){try{var n=e.normalizeError(t),r=n.jsUrl,o=n.lineNumber;if(o&&o>0&&r&&e.canGetSource(r)){if(e.g_sourceHash||(e.g_sourceHash={}),!e.g_sourceHash[r]&&(e.g_sourceHash[r]=e.getSource(r),!e.g_sourceHash[r]))return;var a=e.g_sourceHash[r].split("\n");a.length>=o&&(t.errorLines={before:1===o?null:a[o-2],current:a[o-1],after:a.length<o?null:a[o]})}}catch(i){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"addSourceLines",exception:e.exceptionToState(i)})}},e.regExpUrl=new RegExp("((https?|ftp|gopher|telnet|file|notes|ms-help):((//)|(\\\\))+[\\w\\d#@%/;$()~_?\\+-=\\\\\\.&]*)"),e.normalizeError=function(t){var n={};if(t.exception&&t.exception.stack){var r=[];if(t.exception.stack.replace(e.regExpUrl,function(){r.push(arguments[0])}),r[0]){var o=r[0];")"===o[o.length-1]&&(o=o.substr(0,o.length-1));var a=o.split(":"),i=parseInt(a[a.length-1],10),c=parseInt(a[a.length-2],10);isNaN(c)?(n.lineNumber=i,a.pop(),o=a.join(":")):(n.lineNumber=c,n.charPosition=i,a.pop(),a.pop(),o=a.join(":")),n.jsUrl=o}}else t.exception&&t.exception.fileName?n.jsUrl=t.exception.fileName:t.exception&&t.exception.sourceURL?n.jsUrl=t.exception.sourceURL:t.url&&(n.jsUrl=t.url);return t.exception&&t.exception.line?n.lineNumber=t.exception.line:t.exception&&t.exception.lineNumber?n.lineNumber=t.exception.lineNumber:t.linenumber&&(n.lineNumber=t.linenumber),n},e.logError=function(t,n,r){try{if(e.g_intLoggedEventCount<10){var o={type:"eventHandler",exception:e.exceptionToState(r),event:n};if(o.exception&&o.exception.message&&"Script error."===o.exception.message)return;e.addHtmlNodeinfo(o,t),e.serverLogError(o)}}catch(a){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"logError",exception:e.exceptionToState(a)})}},e.addHtmlNodeinfo=function(t,n){var r={};e._addHtmlNodeinfo(t,r,n,[]);for(var o in r){t.html=r;break}},e._addHtmlNodeinfo=function(t,n,r,o){try{if(void 0===r)return;var a=r.innerHTML;if(a.length<1024){n.tagName=r.tagName;var i=e.copyStyle(t,n,r,o);if(e.copyHtmlProperties(t,n,r),r.hasChildNodes){o.push(i);for(var c=[],s=0;s<r.childNodes.length;s++){var u=r.childNodes[s];u&&u.tagName?c.push(e._addHtmlNodeinfo(t,{},u,o)):u&&u.data&&c.push({text:u.data})}c.length>0&&(n.children=c),o.pop(i)}return n}}catch(l){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"addHtmlNodeinfo",exception:e.exceptionToState(l)})}},e.copyHtmlProperties=function(t,n,r){try{var o={},a=document.createElement(r.tagName);for(var i in r){var c="",s="";try{c=r[i],s=c+""}catch(u){}if(c&&""!==s&&-1===i.toLowerCase().indexOf("html")&&-1===i.toLowerCase().indexOf("text")&&("string"==typeof c||"number"==typeof c)&&!e.g_regExpIgnoreHtmlProperties.test(i))try{a[i]=c,o[i]=c}catch(l){}}return n.properties=o,o}catch(d){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"copyHtmlProperties",exception:e.exceptionToState(d)})}},e.copyStyle=function(t,n,r,o){try{var a=null;if("undefined"!=typeof r.currentStyle?a=r.currentStyle:document.defaultView&&(a=document.defaultView.getComputedStyle(r,null)),null===a)return{};var i,c,s={};for(var u in a){var l=parseInt(u,10);if(isNaN(l)?(i=a[u],c=i+""):(u=a[l],i=a[u],c=i+""),i&&"-"!==u.substr(0,1)&&""!==c&&0!==c.indexOf("0")&&"none"!==c&&"false"!==c&&"auto"!==c&&"normal"!==c&&-1===u.indexOf("scroll")&&"inherit"!==c&&"0pt"!==c&&"cssText"!==u&&-1===u.indexOf("webkit")){for(var d=!0,g=o.length-1;g>=0;g--)if(o[u]){o[u]===i&&(d=!1);break}d&&(s[u]=i)}}return n.style=s,s}catch(p){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"copyStyle",exception:e.exceptionToState(p)})}return{}},e.onError=function(t,n,r,o,a){try{var i=void 0===window.Muscula.settings.suppressErrors||window.Muscula.settings.suppressErrors;if(e.suppressNextOnError)return delete e.suppressNextOnError,i;if("Script error."===t)return i;if(e.g_intLoggedEventCount<10){if(a){var c={type:"onerrorwitherror",exception:e.exceptionToState(a)};return c.exception&&c.exception.message&&"Script error."===c.exception.message?i:(e.serverLogError(c),i)}"object"==typeof t&&t.srcElement&&t.target&&"[object HTMLScriptElement]"===t.srcElement&&"[object HTMLScriptElement]"===t.target?t="Error loading script":t&&t.srcElement?t="Error in event srcElement: "+t.srcElement+", target:"+t.target:t&&t.toString&&(t=t.toString());var s;try{s=e.printStackTrace&&e.printStackTrace()}catch(u){s="Error getting printstack: "+u}var l=e.g_blnInSetTimeout?"setTimeout":"onError";e.g_blnInSetTimeout=!1;var d={type:l,message:t,url:n,linenumber:r,column:o,printStack:s};e.g_objCurrentEvent&&(d.event=e.g_objCurrentEvent),e.addHtmlNodeinfo(d,e.g_objCurrentEventNode),e.serverLogError(d)}return e.g_fnOldOnError&&e.g_fnOldOnError(t,n,r,o,a),i}catch(g){e.g_blnLoggingInternal||e.serverLogError({internal:!0,"function":"onError",exception:e.exceptionToState(g)})}},e.wrappedEventHandlerCache={},e.wrapEventHandler=function(t,n){if("function"!=typeof t)return t;try{var r;if(t._musculaEventHandlerId)r=t._musculaEventHandlerId;else{r=(new Date).getTime()+"_"+Math.random(),t._musculaEventHandlerId=r;var o=e.getWrappedEventHandler(t);o["_'"]=!0,e.wrappedEventHandlerCache[r]=o}return n["data-objEventHandlersHash"]||(n["data-objEventHandlersHash"]={}),n["data-objEventHandlersHash"][r]=e.wrappedEventHandlerCache[r],e.wrappedEventHandlerCache[r]}catch(a){try{t["_'"]=!0}catch(i){}return t}},e.getWrappedEventHandler=function(t){return e.g_blnOnlyUseOnError?function(n){e.g_objCurrentEventNode=this,e.g_objCurrentEvent=e.eventToState(n||window.event);var r=t.apply(this,e.argumentsToArray(arguments));return e.g_objCurrentEventNode=void 0,e.g_objCurrentEvent=void 0,r}:function(n){try{e.g_objCurrentEventNode=this,e.g_objCurrentEvent=e.eventToState(n||window.event);var r=t.apply(this,e.argumentsToArray(arguments));return e.g_objCurrentEventNode=void 0,e.g_objCurrentEvent=void 0,r}catch(o){e.logError(this,e.eventToState(n||window.event),o);var a=void 0===window.Muscula.settings.suppressErrors||window.Muscula.settings.suppressErrors;if(!a)throw e.suppressNextOnError=!0,o}}},e.addEventListener=function(t,n,r){this["data-addEventListenerOld"](t,e.wrapEventHandler(n,this),r)},e.removeEventListener=function(e,t,n){t&&t._musculaEventHandlerId&&this["data-objEventHandlersHash"]&&this["data-objEventHandlersHash"][t._musculaEventHandlerId]&&(t=this["data-objEventHandlersHash"][t._musculaEventHandlerId],delete this["data-objEventHandlersHash"][t._musculaEventHandlerId]),this["data-removeEventListenerOld"](e,t,n)},e.attachEvent=function(t,n){this["data-attachEventOld"](t,e.wrapEventHandler(n,this))},e.detachEvent=function(e,t){t._musculaEventHandlerId&&this["data-objEventHandlersHash"]&&this["data-objEventHandlersHash"][t._musculaEventHandlerId]&&(t=this["data-objEventHandlersHash"][t._musculaEventHandlerId],delete this["data-objEventHandlersHash"][t._musculaEventHandlerId]),this["data-detachEventOld"](e,t)},e.interceptSingleNode=function(t){try{if(!t)return;t.addEventListener&&!t["data-addEventListenerOld"]&&(t["data-addEventListenerOld"]=t.addEventListener,t.addEventListener=e.addEventListener),t.removeEventListener&&!t["data-removeEventListenerOld"]&&(t["data-removeEventListenerOld"]=t.removeEventListener,t.removeEventListener=e.removeEventListener),t.attachEvent&&!t["data-attachEventOld"]&&(t["data-attachEventOld"]=t.attachEvent,t.attachEvent=e.attachEvent),t.detachEvent&&!t["data-detachEventOld"]&&(t["data-detachEventOld"]=t.detachEvent,t.detachEvent=e.detachEvent)}catch(n){e.serverLogError({internal:!0,"function":"interceptSingleNode",exception:e.exceptionToState(n)})}},e.g_aEvents=["onload","ontouchstart","ontouchend","onactivate","onafterupdate","onbeforeactivate","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforepaste","onbeforeupdate","onblur","onchange","onclick","oncontextmenu","oncontrolselect","oncut","ondblclick","ondeactivate","ondragenter","ondragleave","ondragover","ondrop","onerrorupdate","onfocus","onfocusin","onfocusout","onhelp","onkeydown","onkeypress","onkeyup","onlosecapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onpaste","onpropertychange","onreadystatechange","onresize","onresizeend","onresizestart","onselectstart"],e.interceptSingleNodeProperties=function(t){try{for(var n=e.g_aEvents.length,r=0;n>r;r++){var o=t[e.g_aEvents[r]];"function"!=typeof o||o["_'"]||(t[e.g_aEvents[r]]=e.wrapEventHandler(o,t))}}catch(a){e.serverLogError({internal:!0,"function":"interceptSingleNodeProperties",exception:e.exceptionToState(a)})}},e.reattachOnLoadAndOnError=function(){try{e.g_blnAttachedEventsWithProperty&&(window.onload!==e.onLoad&&(e.g_fnOldOnLoad=window.onload,window.onload=e.onLoad),window.onload=e.onLoad),window.onerror&&window.onerror!==e.onError&&(e.g_fnOldOnError=window.onerror),window.onerror=e.onError}catch(t){e.serverLogError({internal:!0,"function":"reattachOnLoadAndOnError",exception:e.exceptionToState(t)})}},e.SLOW_BROWSER_THRESHOLD=100,e.interceptBodyInterrupt=function(){try{if(!document||!document.body)return void e.setTimeout(e.interceptBodyInterrupt,200);var t=document.all||document.getElementsByTagName("*"),n=t.length,r=e.g_intIterceptBodyIndex||0;if(n>r){for(var o=(new Date).getTime(),a=0;n>r&&a<e.SLOW_BROWSER_THRESHOLD;r++){var i=t[r];e.interceptSingleNode(i),a=(new Date).getTime()-o}n>r?e.g_blnSlowBrowser=!0:e.g_blnDocumentLoaded||(e.g_intIterceptBodyIndex=r,e.reattachOnLoadAndOnError(),e.setTimeout(e.interceptBodyInterrupt,200))}else e.g_blnDocumentLoaded||(e.reattachOnLoadAndOnError(),e.setTimeout(e.interceptBodyInterrupt,200))}catch(c){e.serverLogError({internal:!0,"function":"interceptBodyInterrupt",exception:e.exceptionToState(c)})}},e.interceptCreateElement=function(){try{document&&!document["data-oldCreateElement"]&&(document["data-oldCreateElement"]=document.createElement,document.createElement=function(t){var n;return n=document["data-oldCreateElement"].apply?document["data-oldCreateElement"].apply(this,e.argumentsToArray(arguments)):document["data-oldCreateElement"](t),e.interceptSingleNode(n),e.setTimeout(function(){e.interceptSingleNodeProperties(n)},1),n})}catch(t){e.serverLogError({internal:!0,"function":"interceptCreateElement",exception:e.exceptionToState(t)})}},e.setTimeout=function(t,n){e.g_fnOriginalSetTimeout?e.g_fnOriginalSetTimeout.call?e.g_fnOriginalSetTimeout.call(window,t,n):e.g_fnOriginalSetTimeout(t,n):setTimeout(t,n)},e.onLoad=function(){try{e.g_blnDocumentLoaded=!0,e.reattachOnLoadAndOnError(),e.g_fnOldOnLoad&&e.g_fnOldOnLoad.apply(this,e.argumentsToArray(arguments))}catch(t){e.serverLogError({internal:!0,"function":"onLoad",exception:e.exceptionToState(t)})}},e.logErrorArrayInterrupt=function(){try{for(;window.Muscula.errors&&window.Muscula.errors.length;){var t=window.Muscula.errors.pop();t instanceof Error?e.logError(null,null,t):t&&e.onError.apply(Muscula,t)}}catch(n){e.serverLogError({internal:!0,"function":"logErrorArrayInterrupt",exception:e.exceptionToState(n)})}try{setTimeout(e.logErrorArrayInterrupt,500)}catch(n){e.serverLogError({internal:!0,"function":"logErrorArrayInterrupt.setTimeout",exception:e.exceptionToState(n)})}},e.init=function(){try{if(window.onerror=e.onError,e.logErrorArrayInterrupt(),void 0===window.Muscula.settings.tryCatch||window.Muscula.settings.tryCatch){e.g_blnDocumentLoaded=!1;var t=navigator.userAgent.toLowerCase();if(-1!==t.indexOf("msie"))return void(e.g_blnOnlyUseOnError=!0);try{throw new Error("test for logger")}catch(n){n.stack&&(e.g_blnSupportForStackTrace=!0)}if(!e.g_blnSupportForStackTrace&&-1===t.indexOf("opera"))return void(e.g_blnOnlyUseOnError=!0);window.addEventListener?window.addEventListener("load",e.onLoad,!1):window.attachEvent?window.attachEvent("onload",e.onLoad):(e.g_blnAttachedEventsWithProperty=!0,window.onload=e.onLoad),e.interceptCreateElement(),e.interceptSingleNode(window);var r=window.console&&window.console.firebug;r||e.interceptSingleNode(document),e.interceptBodyInterrupt()}}catch(o){e.serverLogError({internal:!0,"function":"init",exception:e.exceptionToState(o)})}}}(),e.init()}();
